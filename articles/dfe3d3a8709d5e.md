---
title: "ã€Goã€‘ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ozzo-validationãŒä¾¿åˆ©ã ã£ãŸä»¶"
emoji: "ğŸ”–"
type: "tech"
topics: []
published: false
---

ã“ã‚“ã«ã¡ã¯ã€@nerusanã•ã‚“ã§ã™ã€‚
æœ€è¿‘ã¯ã‚ˆãGoè¨€èªã‚’è§¦ã£ã¦ã„ã‚‹ã®ã§ã€Goã«é–¢ã™ã‚‹è¨˜äº‹ã‚’æŠ•ç¨¿ã—ã¾ã™ã€‚
APIã‚’ä½œã‚‹éš›ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæ­£ã—ã„ã‹validationã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã‹ãªã£ã¦æ€ã„ã¾ã™ã€‚

https://github.com/go-playground/validator

ã¨ã¦ã‚‚ç°¡å˜ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Ÿç¾ã§ãã¦è‰¯ã•ã’ã§ã™ã€‚

```go:go
var input struct {
	Name     string `json:"name" validate:"required,gt=0,lte=20"`
	Password string `json:"password" validate:"required,gt=0,lte=80"`
	Email    string `json:"email" validate:"required,email,gt=0,lte=20"`
}
if err := ru.Validator.Struct(input); err != nil {
	APIResponse(ctx, err.Error(), http.StatusBadRequest, http.MethodPost, nil)
 	return
}
```
ãŸã ã€ä½¿ã„ã«ãã„ç‚¹ã‚‚å¤šã€…ã‚ã‚Šã¾ã™ã€‚
1ã¤ç›®ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™éš›ã©ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒã©ã®æ§˜ãªã‚¨ãƒ©ãƒ¼ãªã®ã‹ã‚’è¿”ã™ã®ãŒå¤§å¤‰ã§ã™ã€‚

ä¸Šè¨˜ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¡¨ç¤ºã™ã‚‹ã¨ä»¥ä¸‹ã®æ§˜ã«ãªã‚Šã¾ã™ã€‚ä½•ã‹è‰²ã€…ã”ã¡ã‚ƒã”ã¡ã‚ƒã—ã¦ã„ã¦åˆ†ã‹ã‚Šã«ãã€ã‹ã¤ã€ã‚µãƒ¼ãƒãƒ¼å´ã®å¤‰æ•°ã®æƒ…å ±(Email, Password, Name)ãŒå¤–éƒ¨ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šçš„ã«ã‚‚è‰¯ããªã„ã§ã™ã€‚

```json:ãƒ¬ã‚¹ãƒãƒ³ã‚¹
{
  "statusCode": 400,
  "method": "POST",
  "message": "Key: 'Name' Error:Field validation for 'Name' failed on the 'gt' tag\nKey: 'Password' Error:Field validation for 'Password' failed on the 'gt' tag\nKey: 'Email' Error:Field validation for 'Email' failed on the 'gt' tag",
  "data": null
}
```

ã‚¨ãƒ©ãƒ¼ã‚’æ•æ‰ã—ã¦ã€ç‹¬è‡ªã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹æ–¹æ³•ãŒä»¥ä¸‹è¨˜äº‹ã«ã‚ã‚Šã¾ã™ãŒã€ã‹ãªã‚Šãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›¸ãã“ã¨ã«ãªã‚Šã€è¤‡é›‘ã«ãªã‚‹ã€ã‹ã¤å‹•ä½œç¢ºèªãŒå¤§å¤‰ã§ã™ã€‚

https://qiita.com/RunEagler/items/ad79fc860c3689797ccc#%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E6%8D%95%E6%8D%89%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95

2ç‚¹ç›®ã¯ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã¯æ–‡å­—åˆ—ã§æŒ‡å®šã™ã‚‹ã®ã§ã€ã‚¿ã‚¤ãƒã—ã¦ã„ã¦ã‚‚å®Ÿè¡Œã™ã‚‹ã¾ã§å‹•ä½œã™ã‚‹ã®ã‹ãŒåˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚å¤§é‡ã«ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹ã¨ã€èª­ã¿ã«ãããªã‚Šã€ã‚¿ã‚¤ãƒã™ã‚‹å¯èƒ½æ€§ãŒå¤§å¹…ã«ä¸ŠãŒã‚Šã¾ã™ã€‚



ãã®å•é¡Œç‚¹ã‚’è§£æ±ºã—ã¦ãã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ozzo-validationãŒã™ã”ãä¾¿åˆ©ã ãªã£ã¦æ€ã£ãŸã®ã§å…±æœ‰ã—ã¾ã™ã€‚

https://github.com/go-ozzo/ozzo-validation

# ä½¿ã£ã¦ã¿ã‚ˆã†