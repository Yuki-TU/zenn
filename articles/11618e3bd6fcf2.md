---
title: "Swaggerã‚’GitHub Pagesã§å…¬é–‹ã™ã‚‹"
emoji: "ğŸ’­"
type: "tech"
topics:
  - "github"
  - "githubpages"
  - "swagger"
  - "openapi"
published: true
published_at: "2022-10-30 03:42"
---

ã“ã‚“ã«ã¡ã¯ã€@nerusanã§ã™ã€‚
ã¿ãªã•ã‚“ã¯ã€swaggerã‚’åˆ©ç”¨ã—ãŸã“ã¨ã¯ã‚ã‚Šã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚

https://swagger.io/specification/

REST APIã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹éƒ¨åˆ†ã¨ãªã‚Šã€
ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ãƒ•ãƒ­ãƒ³ãƒˆåˆ†é›¢ã—ãŸé–‹ç™ºã‚’ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã‹ã‚‰ã¯ã€æ¬ ã‹ã›ãªã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚

ãŸã ã€å®šç¾©ã—ãŸswaggerã‚’å…¬é–‹ã™ã‚‹ä½œæ¥­ãªã©ã€ã‚ã‚“ã©ãã•ã‹ã£ãŸã‚Šã—ã¾ã™ã€‚

ãã“ã§ã€ä»Šå›ã¯ã€swaggerã‚’GitHub Pagesã§ç°¡å˜ã«å…¬é–‹ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚github pagesã‚’åˆ©ç”¨ã™ã‚‹ã¨ãƒãƒ¼ã‚¸ã®æ—…ã«ã€è‡ªå‹•ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ãŸã‚ã€ã¨ã¦ã‚‚ä¾¿åˆ©ã§ã™ã€‚

https://docs.github.com/ja/pages/getting-started-with-github-pages/creating-a-github-pages-site


# 1. GitHubãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”¨æ„

ã¾ãšã€swaggerã‚’å…¬é–‹ã™ã‚‹ãŸã‚ã®GitHubãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚
é€šå¸¸ã¯ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å«ã‚ã‚‹ã‹ãªã£ã¦æ€ã„ã¾ã™ã€‚
GitHubä¸Šã§ã€ä¾‹ã¨ã—ã¦`sample-backend`ã‚’ä½œæˆã—ã€ãã‚Œã‚’è‡ªèº«ã®ç’°å¢ƒã«cloneã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/011c3b723843-20221030.png)

```sh
$ cd dev  # è‡ªèº«ã®é–‹ç™ºç’°å¢ƒã«ç§»å‹•
$ git clone https://github.com/Yuki-TU/sample-backend.git
$ cd ./sample-backend
```

# 2. openapi.ymlã®ç”¨æ„

æ¬¡ã«`openapi.yml`ã‚’ç”¨æ„ã—ã¾ã™ã€‚ã“ã¡ã‚‰ã¯ã€swaggerã®å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã§å®šç¾©ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚‚ã¨ã«ã€swaggerãƒšãƒ¼ã‚¸ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

ã©ã†ã„ã£ãŸAPIãªã®ã§ã€ã©ã†ã„ã£ãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚‹ã®ã‹ã€ã©ã†ã„ã£ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒå¸°ã£ã¦ãã‚‹ã®ã‹ã‚’å®šç¾©ã—ã¾ã—ã‚‡ã†ã€‚

ä½œæˆã™ã‚‹å ´æ‰€ã€`docs`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆé…ä¸‹ã«ä½œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€GitHub Pageã‚’å…¬é–‹ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ã€ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆã¾ãŸã¯ã€docsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã—ã‹é¸ã¹ãªã„ãŸã‚ã§ã™ã€‚

```sh:shell
$ mkdir docs
$ cd docs
$ touch openapi.yml
```

å…·ä½“çš„ãªè¨˜è¿°æ–¹æ³•ã¯å…¬å¼ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ä½œã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

https://swagger.io/docs/specification/about/

```yml:openapi.yml
openapi: 3.0.0
info:
  version: 0.0.0
  title: RESTful API
  description: >-
    ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API
servers:
  - url: 'http://{host}:8081/api/v1'
    description: go service api server endpoint application
    variables:
      host:
        default: localhost
        enum:
          - localhost
paths:
  /register:
    post:
      tags:
        - user
      summary: ãƒ¦ãƒ¼ã‚¶ç™»éŒ²
      description: |
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒå…¥åŠ›ã™ã‚‹æƒ…å ±ã‚’ã‚‚ã¨ã«ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’ç™»éŒ²ã™ã‚‹
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: å±±ç”°å¤ªéƒ
                email:
                  type: string
                  format: email
                  example: yamada@hoge.hoge
                password:
                  type: string
                  format: password
                  example: qwerty123456789
              required:
                - name
                - email
                - password
      responses:
        '200':
          description: ãƒ¦ãƒ¼ã‚¶æƒ…å ±ç™»éŒ²æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    format: number
                    example: 200
                  method:
                    type: string
                    example: "POST"
                  message:
                    type: string
                    example: "ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ã«æˆåŠŸã—ã¾ã—ãŸã€‚"
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                required:
                  - statusCode
                  - method
                  - message
                  - data
        '409':
          description: |
            ç™»éŒ²æ¸ˆã¿ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    format: number
                    example: 409
                  method:
                    type: string
                    example: "POST"
                  message:
                    type: string
                    example: "ç™»éŒ²æ¸ˆã¿ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™ã€‚"
                  data: 
                    type: object
                    example: null
        '500':
          $ref: '#/components/responses/500Error'
components:
  responses:
    500Error:
      description: |
        ã‚µãƒ¼ãƒãƒ¼ä¸Šã®ã‚¨ãƒ©ãƒ¼
      content:
        application/json:
          schema:
            type: object
            properties:
              statusCode:
                type: integer
                format: int64
                example: "500"
              method:
                type: string
                example: "POST"
              message: 
                type: string
                example: "ã‚µãƒ¼ãƒãƒ¼å´ã§ä½•ã‚‰ã‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚"
              data:
                type: object
                example: null
```


# 3. swaggerãƒšãƒ¼ã‚¸ã®æº–å‚™

`openapi.yml`ã ã‘ã§ã¯ã€ãƒšãƒ¼ã‚¸ã‚’å…¬é–‹ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ãã“ã§å®šç¾©ã—ãŸå€¤ã‚’è¡¨ç¤ºã™ã‚‹html, css, JavaScriptã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã¯ã€swagger-uiã®GitHubã®ãƒšãƒ¼ã‚¸ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

https://github.com/swagger-api/swagger-ui

ä¸Šè¨˜ã®GitHubã®ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå…¥ã£ã¦ã„ã‚‹`dist`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®é…ä¸‹ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

https://github.com/swagger-api/swagger-ui/tree/master/dist

ã¾ãšã¯ã€zipãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/50b0d2c9e64f-20221030.png)

ãã—ã¦ã€disté…ä¸‹å…¨ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’swaggerãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã¾ã™ã€‚

```sh:shell
$ ls
openapi.yml
$ mkdir swagger
$ cd swagger
$ mv ~/Downloads/swagger-ui-master/dist/* ./
$ ls
favicon-16x16.png                       oauth2-redirect.html                    swagger-ui-es-bundle-core.js            swagger-ui-standalone-preset.js         swagger-ui.js
favicon-32x32.png                       swagger-initializer.js                  swagger-ui-es-bundle-core.js.map        swagger-ui-standalone-preset.js.map     swagger-ui.js.map
index.css                               swagger-ui-bundle.js                    swagger-ui-es-bundle.js                 swagger-ui.css
index.html                              swagger-ui-bundle.js.map                swagger-ui-es-bundle.js.map             swagger-ui.css.map
```

# 4. ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿®æ­£

æ¬¡ã«openapi.ymlã‚’èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ã€index.htmlã‚’ç·¨é›†ã—ã¾ã™ã€‚

ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚
https://github.com/swagger-api/swagger-ui/blob/master/docs/usage/installation.md#unpkg

```html:docs/swagger/index.html
<!-- HTML for static distribution bundle build -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Swagger UI</title>
    <link rel="stylesheet" type="text/css" href="./swagger-ui.css" />
    <link rel="stylesheet" type="text/css" href="index.css" />
    <link rel="icon" type="image/png" href="./favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="./favicon-16x16.png" sizes="16x16" />
  </head>
  <body>
    <div id="swagger-ui"></div>
    <script src="./swagger-ui-bundle.js" charset="UTF-8"> </script>
    <script src="./swagger-ui-standalone-preset.js" charset="UTF-8"> </script>
    <script src="./swagger-initializer.js" charset="UTF-8"> </script>
+   <script>
+     window.onload = () => {
+       window.ui = SwaggerUIBundle({
+         url: '../openapi.yml',
+         dom_id: '#swagger-ui',
+         presets: [
+           SwaggerUIBundle.presets.apis,
+           SwaggerUIStandalonePreset
+         ],
+         layout: "StandaloneLayout",
+       });
+     };
+   </script>
  </body>
</html>
```

# 5. GitHubPagesã®è¨­å®š

1.ã§ä½œæˆã—ãŸGitHubãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ãã¾ã™ã€‚
Settingsâ†’Pagesã«ç§»å‹•ã—ã¾ã™ã€‚
ã‚½ãƒ¼ã‚¹ã¯`deploy from a branch`ã€ ãƒ–ãƒ©ãƒ³ãƒã¯`main`, ãƒ•ã‚©ãƒ«ãƒ€ã¯`docs`ã‚’é¸ã³ä¿å­˜ã‚’æŠ¼ã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/4b56ae46af04-20221030.png)

æ•°åˆ†çµŒã¤ã¨åŒãƒšãƒ¼ã‚¸ã®ä¸Šè¨˜ã«URLãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚è¡¨ç¤ºã•ã‚Œã¦ã‹ã‚‰ä»¥ä¸‹ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã¨ã€ä»Šå›ä½œæˆã—ãŸswaggerã®ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
[https://{è‡ªèº«ã®GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆid}.github.io/sample-backend/swagger](https://{è‡ªèº«ã®GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆid}.github.io/sample-backend/swagger)

å¾Œã¯ã€ä¿®æ­£ã™ã‚‹ãŸã³ã«ã€mainãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸ã™ã‚‹ã¨ã€è‡ªå‹•ã§æ›´æ–°ã•ã‚Œã¾ã™ã€‚

# ã¾ã¨ã‚

ä»¥ä¸Šã€swaggerã‚’GitHub Pagesã«å…¬é–‹ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚
ç°¡å˜ã«ã§ãã‚‹ã®ã§ã€ãœã²è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

ã¾ãŸã€é–“é•ã£ã¦ã„ã‚‹ã“ã¨ãªã©ã‚ã‚Œã°ã€ã‚³ãƒ¡ãƒ³ãƒˆã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚






